<UserControl x:Class="GCS.Views.Model3DTabView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:helix="http://helix-toolkit.org/wpf"
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="480">
    
    <UserControl.Resources>
        <SolidColorBrush x:Key="CardBackground" Color="#1C2128"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#2D333D"/>
        <SolidColorBrush x:Key="PrimaryText" Color="#E6EDF3"/>
        <SolidColorBrush x:Key="SecondaryText" Color="#8B949E"/>
        <SolidColorBrush x:Key="AccentCyan" Color="#39D0D8"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0"
                Background="{StaticResource CardBackground}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="6"
                Padding="12"
                Margin="5">
            <TextBlock Text="3D MODEL VIEW" 
                      Foreground="{StaticResource SecondaryText}"
                      FontSize="11"
                      FontWeight="Bold"/>
        </Border>
        
        <!-- 3D Viewport -->
        <Border Grid.Row="1"
                Background="#0A0E14"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="6"
                Margin="5"
                ClipToBounds="True">
            
            <helix:HelixViewport3D x:Name="Viewport3D"
                                   Background="#0A0E14"
                                   ShowCoordinateSystem="True"
                                   CoordinateSystemLabelForeground="White"
                                   ZoomExtentsWhenLoaded="True"
                                   IsRotationEnabled="True"
                                   IsPanEnabled="True"
                                   IsZoomEnabled="True">
                
                <!-- Camera -->
                <helix:HelixViewport3D.Camera>
                    <PerspectiveCamera Position="2,2,2" 
                                       LookDirection="-1,-1,-1" 
                                       UpDirection="0,0,1"
                                       FieldOfView="45"/>
                </helix:HelixViewport3D.Camera>
                
                <!-- Lights -->
                <helix:SunLight/>
                <ModelVisual3D>
                    <ModelVisual3D.Content>
                        <AmbientLight Color="#404040"/>
                    </ModelVisual3D.Content>
                </ModelVisual3D>
                
                <!-- Grid Floor -->
                <helix:GridLinesVisual3D Width="2" Length="2" 
                                         MinorDistance="0.1" 
                                         MajorDistance="0.5"
                                         Thickness="0.005"
                                         Fill="#30FFFFFF"/>
                
                <!-- UAV Model Container -->
                <ModelVisual3D x:Name="UAVModelVisual"/>
                
            </helix:HelixViewport3D>
        </Border>
        
        <!-- Attitude Readout -->
        <Border Grid.Row="2"
                Background="{StaticResource CardBackground}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="6"
                Padding="12"
                Margin="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Roll -->
                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                    <TextBlock Text="ROLL" 
                              Foreground="{StaticResource SecondaryText}"
                              FontSize="9"
                              HorizontalAlignment="Center"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding Roll, StringFormat=F1}" 
                                  Foreground="{StaticResource AccentCyan}"
                                  FontSize="18"
                                  FontWeight="Bold"
                                  FontFamily="Consolas"/>
                        <TextBlock Text="°" 
                                  Foreground="{StaticResource AccentCyan}"
                                  FontSize="12"
                                  VerticalAlignment="Bottom"
                                  Margin="2,0,0,2"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- Pitch -->
                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                    <TextBlock Text="PITCH" 
                              Foreground="{StaticResource SecondaryText}"
                              FontSize="9"
                              HorizontalAlignment="Center"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding Pitch, StringFormat=F1}" 
                                  Foreground="{StaticResource AccentCyan}"
                                  FontSize="18"
                                  FontWeight="Bold"
                                  FontFamily="Consolas"/>
                        <TextBlock Text="°" 
                                  Foreground="{StaticResource AccentCyan}"
                                  FontSize="12"
                                  VerticalAlignment="Bottom"
                                  Margin="2,0,0,2"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- Yaw -->
                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                    <TextBlock Text="YAW" 
                              Foreground="{StaticResource SecondaryText}"
                              FontSize="9"
                              HorizontalAlignment="Center"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding Yaw, StringFormat=F1}" 
                                  Foreground="{StaticResource AccentCyan}"
                                  FontSize="18"
                                  FontWeight="Bold"
                                  FontFamily="Consolas"/>
                        <TextBlock Text="°" 
                                  Foreground="{StaticResource AccentCyan}"
                                  FontSize="12"
                                  VerticalAlignment="Bottom"
                                  Margin="2,0,0,2"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
